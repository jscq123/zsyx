(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{417:function(t,e,o){var content=o(480);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(3).default)("9df5d13c",content,!0,{sourceMap:!1})},479:function(t,e,o){"use strict";var r=o(417);o.n(r).a},480:function(t,e,o){(t.exports=o(2)(!1)).push([t.i,".deposit-tip-box[data-v-47c56faf]{right:-1px}.deposit-tip-tit span[data-v-47c56faf]{display:block}.deposit-tip-tit span[data-v-47c56faf]:first-child{font-size:8px;transform:translate(2px,-4px) scale(.7);-webkit-transform:translate(2px,-4px) scale(.9)}.deposit-tip-tit span[data-v-47c56faf]:nth-child(2){font-size:10px;transform:scale(.8);-webkit-transform:scale(.8);margin-top:-1px}.deposit-tip-icon[data-v-47c56faf]{position:absolute;top:0;right:0;width:0;height:0;border-color:#ffae00 #ffae00 transparent transparent;border-style:solid;border-width:24px}.deposit-selected[data-v-47c56faf]{border:1px solid #ffae00;color:#ffae00}.account-wrap .btn[data-v-47c56faf],.btn-orange[data-v-47c56faf]{position:absolute;bottom:0;background:linear-gradient(135deg,rgba(255,174,0,.3),rgba(255,213,0,.1))}.el-main[data-v-47c56faf]{height:100vh}.deposit-btn-box[data-v-47c56faf]{position:inherit;width:calc(100vw - 40px);height:40px;margin-top:30px}.btn[data-v-47c56faf],.info-input[data-v-47c56faf]{height:40px;line-height:40px}.current-accout[data-v-47c56faf]{padding:24px 0;margin-top:20px}.menu-account[data-v-47c56faf]{margin:0}.btn-account-address i[data-v-47c56faf]{background:url(/img/address@2x.png) no-repeat 50%}.btn-z-rwt i[data-v-47c56faf]{background:url(/img/zh@2x.png) no-repeat 50%}.btn-cz i[data-v-47c56faf]{background:url(/img/cz.png) no-repeat 50%}.avatar[data-v-47c56faf]{position:relative}.menu-account[data-v-47c56faf]{border:none}.b-yellow[data-v-47c56faf]{color:#ffc400;background:linear-gradient(135deg,rgba(255,174,0,.3),rgba(255,213,0,.1));border:1px solid #ffae00}.b-gray[data-v-47c56faf]{color:#ccc;background:linear-gradient(135deg,hsla(0,0%,55.7%,.3),hsla(0,0%,70.2%,.1));border:1px solid #ccc}.btn-withdraw i[data-v-47c56faf]{display:inline-block;width:16px;height:16px;margin-right:7px;background-size:100%}.btn-withdraw[data-v-47c56faf]{height:36px;line-height:36px;border-radius:3px;width:calc(100% - 2px);display:inline-block;margin:10px 0 18px;display:flex;display:-webkit-flex;align-items:center;justify-content:center;position:relative}.h-40[data-v-47c56faf]{height:40px;line-height:40px}.verfied-type-icon[data-v-47c56faf]{background-color:transparent;width:11px;height:10px;margin-left:-2px}.color-w[data-v-47c56faf]{color:#fff}.ff-pfscr[data-v-47c56faf]{font-family:pfscr}.transaction-recode-txt[data-v-47c56faf]{position:absolute;right:15px;top:14px;font-size:14px}.f-r[data-v-47c56faf]{float:right}.f-20[data-v-47c56faf]{font-size:20px}.m-20[data-v-47c56faf]{margin:20px 0 10px}.padding-lr-20[data-v-47c56faf]{padding:0 20px}.line-gray[data-v-47c56faf]{height:1px;background-color:#000}.deadline-text[data-v-47c56faf],.ff-sbrm[data-v-47c56faf],.ws-n .f-r[data-v-47c56faf]{font-family:sbrm}.deposit-btn-box[data-v-47c56faf]{z-index:10}.deposit-payment-gate .deposit-btn-box[data-v-47c56faf]{position:absolute;left:50%;bottom:10%;top:auto;transform:translate(-50%)}",""])},565:function(t,e,o){"use strict";o.r(e);o(20),o(60);var r,n,c=o(8),l=(o(439),o(61)),d=o.n(l),f=o(395),v={middleware:"authenticated",asyncData:(n=Object(c.a)(regeneratorRuntime.mark((function t(e){var o,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.store,e.req,e.params,e.redirect,t.next=3,d.a.post("".concat("https://api-gateway.dev.rwdg.io","/user-api/user-info/account/detail"),{userId:"[user_id]"},{headers:{"Content-Type":"application/json",token:o.state.auth}});case 3:return r=t.sent,data=r.data,t.abrupt("return",{data:data.data,auth:o.state.auth,avatar_tx:"/tx/tx".concat(data.data.avatar,".jpg"),user_name:data.data.email||data.data.mobile,kycState:data.data.kycState,userId:data.data.userId});case 6:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)}),data:function(){return{thiUrl:"",dialogPaySelBox:!1,dialogCardVisible:!1,dialogStoreVisible:!1,practice:0,virtualAccount:0,currentPayGateType:10,currentPayGateInfo:"",currentType:10,currentDepInfo:"",deposiTypeGate:[{type:0,name:"信用卡充值",cardPay:{installment:"0"}},{type:1,name:"虛擬帳號充值"},{type:2,name:"超商代收付款",storePay:{choosePayment:"CVS"}}],cardPay:{installment:"0"},storePay:{choosePayment:"CVS"},depositType:[{account:10,text:"充值10台幣，獲得88RWT代幣",tip:""},{account:70,text:"充值70台幣，獲得488RWT代幣",tip:""},{account:170,text:"充值170台幣，获得1288RWT代幣",tip:"10%"},{account:330,text:"充值330台幣，获得2488RWT代幣",tip:"10%"},{account:760,text:"充值760台幣，获得5488RWT代幣",tip:"20%"},{account:1680,text:"充值1680台幣，获得13888RWT代幣",tip:"20%"}],typeName:"",submitRechargeInfo:{url:"",HashKey:"B8RDMRMYFH5P863TPNMUDVA9B",HashIV:"3SV5QHCTAAJ5DFXY9TK6KTTJL9",MerTradeID:"",MerProductID:"",MerUserID:"",Amount:0,TradeDesc:"这是充值",ItemName:"代币充值",UnionPay:0,Installment:0,ChoosePayment:"CVS",paymentTYPE:"TCC"},depositResult:""}},mounted:function(){if(!this.auth)return localStorage.getItem("accountName")?this.logout("/login"):this.logout("/register"),!1;this.getVirtualAccount(),this.getPractice()},methods:{back:function(){this.$router.back()},getData:(r=Object(c.a)(regeneratorRuntime.mark((function t(e){var o,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this,t.next=3,this.axios(e,{headers:{"Content-Type":"application/json",token:o.auth}});case 3:return r=t.sent,data=r.data,t.abrupt("return",data);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)}),getVirtualAccount:function(){var t=this,e=t.getData("".concat("https://api-gateway.dev.rwdg.io","/wallet-api/wallet/balance/[user_id]/5"));Promise.resolve(e).then((function(e){t.virtualAccount=e.data.available,console.log(e.data.available,"available")}))},getPractice:function(){var t=this,e=t.getData("".concat("https://api-gateway.dev.rwdg.io","/wallet-api/wallet/balance/[user_id]/4"));Promise.resolve(e).then((function(e){t.practice=e.data.available,console.log(e.data.available,"available")}))},dialogCardFuc:function(){var t=this;console.log(this.cardPay.installment),this.deposiTypeGate.forEach((function(e){0==e.type&&(e.cardPay.installment=t.cardPay.installment,t.currentPayGateInfo=e)})),this.dialogCardVisible=!1},dialogStoreFuc:function(){console.log(this.storePay.choosePayment);var t=this;this.deposiTypeGate.forEach((function(e){2==e.type&&(e.storePay.choosePayment=t.storePay.choosePayment,t.currentPayGateInfo=e)})),this.dialogStoreVisible=!1},depositGateSel:function(t){this.currentPayGateType=t;var e=this;this.deposiTypeGate.forEach((function(o){o.type==t&&(e.currentPayGateInfo=o)})),console.log("确认付款渠道",JSON.stringify(this.currentPayGateInfo))},depositSelect:function(t,e){this.currentType=t,this.currentDepInfo=e},createMerId:function(t){for(var e="abcdefghijklmnopqrstuvwxyz0123456789",o="",i=0;i<t;i++)o+=e[parseInt(Math.random()*e.length)];return o},depositGateSelFun:function(){var t=this;if(""==this.currentPayGateInfo||null==this.currentPayGateInfo)t.$message.error("请选择充值渠道");else{console.log("确认付款渠道",JSON.stringify(t.currentPayGateInfo)),t.submitRechargeInfo.MerTradeID=t.createMerId(10),t.submitRechargeInfo.MerProductID=t.auth,t.submitRechargeInfo.MerUserID=1e7+parseInt(t.userId),console.log("that.submitRechargeInfo.MerUserID:",t.submitRechargeInfo.MerUserID),t.submitRechargeInfo.Amount=t.currentDepInfo.account;switch(t.currentPayGateInfo.type){case 0:t.typeName="CreditPaymentGate",t.submitRechargeInfo.UnionPay=0,t.submitRechargeInfo.Installment=t.currentPayGateInfo.cardPay.installment;break;case 1:t.typeName="VirAccountPaymentGate";break;case 2:t.typeName="StorePaymentGate",t.submitRechargeInfo.ChoosePayment=t.currentPayGateInfo.storePay.choosePayment}t.thiUrl="/pay/payflow/"+t.typeName+".php",console.log("提交充值信息集合:",JSON.stringify(t.submitRechargeInfo));var e=new FormData;for(var o in t.submitRechargeInfo)e.append(o,t.submitRechargeInfo[o]);var r=t.axios({method:"post",url:t.thiUrl,headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"},withCredentials:!0,data:e}),n=window.open();r.then((function(e){console.log(e.data),t.dialogPaySelBox=!1;var div=document.createElement("div");div.innerHTML=e.data,n.document.body.appendChild(div);var o="http://payflow.mycash.asia/"+n.document.querySelector("#form1").getAttribute("action");n.document.querySelector("#form1").setAttribute("action",o),n.document.body.setAttribute("style","background-color: #1D2223;"),n.document.querySelector(".container").setAttribute("style","position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);"),n.document.querySelector("#Title").setAttribute("style","color:#FFF;text-align: center;"),n.document.querySelector("#confirmbutton").setAttribute("style","border: 1px solid rgba(255,174,0,1);color: #ffae00;width: 80vw;height: 40px;background: linear-gradient( 135deg, rgba(255, 174, 0, 0.3) 0%, rgba(255, 213, 0, 0.1) 100% );outline: none;border-radius: 3px;"),n.document.querySelector("#form1").submit()}))}},submit:function(){if(0==this.currentDepInfo.account||""==this.currentDepInfo.account||null==this.currentDepInfo.account)this.$message.error("请选择充值金额");else{if(console.log("要充值的金额",this.currentDepInfo.account),"undefined"!=typeof ruiying)return this.depositResult=ruiying.callBackMethod(this.currentDepInfo.account),console.log(this.depositResult,"that.depositResult"),!1;this.dialogPaySelBox=!0}},logout:function(t){this.clearLoginInfo(),t?this.$router.push(t):this.$router.push("/login")},clearLoginInfo:function(){f.remove("auth"),f.remove("jfSelected"),this.$store.commit("setAuth",null),localStorage.removeItem("auth"),localStorage.removeItem("accountName")}},filters:{showUserId:function(t){return 1e7+parseInt(t)}}},m=(o(479),o(35)),component=Object(m.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-container",{staticStyle:{height:"100vh"},attrs:{direction:"vertical"}},[o("el-main",{staticClass:"no-page"},[o("div",{staticClass:"title"},[t._v(t._s(t.$t("depositelast.wallet")))]),t._v(" "),o("i",{staticClass:"el-icon-back header",on:{click:function(e){return t.back()}}}),t._v(" "),o("div",{staticClass:"transaction-recode-txt"},[o("nuxt-link",{attrs:{to:"/deposit_record"}},[o("span",{staticClass:"c-fff ff-pfscr"},[t._v(t._s(t.$t("depositelast.record")))])])],1),t._v(" "),o("div",{staticClass:"avatar m-20"},[o("el-row",[o("el-col",{attrs:{span:6}},[o("span",{staticClass:"avatar_photo ml--32"},[o("img",{attrs:{src:"/img/logo36.png",alt:""}})])]),t._v(" "),o("el-col",{staticClass:"t-l ml--20",attrs:{span:18}},[o("div",{staticClass:"pt-5 f-14 color-w ff-pfscr"},[t._v("\n              "+t._s(t._f("showUserId")(t.userId,t.userId))+"\n              "),o("span",{staticClass:"verfied-type has-verfied verfied-type-icon"},[o("img",{attrs:{src:"/img/rz.png"}})])]),t._v(" "),o("div",{staticClass:"pt-5 c-gray ff-pfscr f-12"},[t._v(t._s(t.user_name))])])],1),t._v(" "),o("div",{staticClass:"menu-account"},[o("el-row",[o("el-col",{attrs:{span:8}},[o("div",{staticClass:"c-gray f-14 ff-pfscr"},[t._v(t._s(t.$t("depositelast.db")))]),t._v(" "),o("div",{staticClass:"ff-sbrm color-w f-20"},[t._v(t._s(t.practice))])]),t._v(" "),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"c-gray f-14 ff-pfscr"},[t._v(t._s(t.$t("depositelast.jf")))]),t._v(" "),o("div",{staticClass:"ff-sbrm color-w f-20"},[t._v(t._s(t.virtualAccount))])])],1)],1)],1),t._v(" "),t.dialogPaySelBox?o("div",{staticClass:"deposit-payment-gate"},[o("span",{staticClass:"close-papySel-btn el-icon-error",on:{click:function(e){t.dialogPaySelBox=!1}}}),t._v(" "),o("p",{staticClass:"c-fff f-14 ff-pfscr",staticStyle:{"margin-bottom":"20px",position:"absolute",top:"30%","text-align":"center",width:"100vw"}},[t._v("选择充值类别")]),t._v(" "),o("ul",{staticClass:"deposit-payment-gate-type"},t._l(t.deposiTypeGate,(function(e,r){return o("li",{key:r,class:{"deposit-selected":t.currentPayGateType==r},on:{click:function(e){return t.depositGateSel(r)}}},[0==e.type?o("p",{on:{click:function(e){t.dialogCardVisible=!0}}},[t._v(" "+t._s(e.name)+" ")]):t._e(),t._v(" "),2==e.type?o("p",{on:{click:function(e){t.dialogStoreVisible=!1}}},[t._v(" "+t._s(e.name)+" ")]):t._e(),t._v(" "),1==e.type?o("p",[t._v(" "+t._s(e.name)+" ")]):t._e()])})),0),t._v(" "),o("div",{staticClass:"deposit-btn-box",on:{click:function(e){return t.depositGateSelFun()}}},[o("div",{staticClass:"btn btn-orange"},[o("i",{staticClass:"figure figure-lt"}),t._v(" "),o("i",{staticClass:"figure figure-rt"}),t._v(" "),o("i",{staticClass:"figure figure-lb"}),t._v(" "),o("i",{staticClass:"figure figure-rb"}),t._v("\n            确认充值\n          ")])])]):t._e(),t._v(" "),o("div",{staticClass:"line-gray",staticStyle:{"margin-bottom":"23px"}}),t._v(" "),o("div",{staticClass:"deposit-list-box"},[o("p",{staticClass:"c-gray f-14 ff-pfscr",staticStyle:{"margin-bottom":"7px"}},[t._v("选择充值金额")]),t._v(" "),t._l(t.depositType,(function(e,r){return o("el-row",{key:r,staticClass:"info-input c-fff ff-sbrm",class:{"deposit-selected":t.currentType==r},nativeOn:{click:function(o){return t.depositSelect(r,e)}}},[o("el-col",{staticClass:"t-l pl-10 f-14"},[t._v("\n            "+t._s(e.text)+"\n            "),""!==e.tip?o("div",{staticClass:"deposit-tip-box"},[o("p",{staticClass:"deposit-tip-icon"}),t._v(" "),o("p",{staticClass:"deposit-tip-tit"},[o("span",{staticClass:"ff-sbrm"},[t._v("+"+t._s(e.tip))])])]):t._e()])],1)}))],2),t._v(" "),o("div",{staticClass:"deposit-btn-box",on:{click:function(e){return t.submit()}}},[o("div",{staticClass:"btn btn-orange"},[o("i",{staticClass:"figure figure-lt"}),t._v(" "),o("i",{staticClass:"figure figure-rt"}),t._v(" "),o("i",{staticClass:"figure figure-lb"}),t._v(" "),o("i",{staticClass:"figure figure-rb"}),t._v("\n          确认充值\n        ")])])]),t._v(" "),o("div",{staticClass:"deposit-payment-gate-dialog"},[o("el-dialog",{attrs:{title:"信用卡充值",visible:t.dialogCardVisible},on:{"update:visible":function(e){t.dialogCardVisible=e}}},[o("el-form",{attrs:{model:t.cardPay}},[o("el-form-item",[o("el-radio",{attrs:{label:"0"},model:{value:t.cardPay.installment,callback:function(e){t.$set(t.cardPay,"installment",e)},expression:"cardPay.installment"}},[t._v("一次付清")]),t._v(" "),o("el-radio",{attrs:{label:"1"},model:{value:t.cardPay.installment,callback:function(e){t.$set(t.cardPay,"installment",e)},expression:"cardPay.installment"}},[t._v("分 3 期")])],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogCardVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"success"},on:{click:function(e){return t.dialogCardFuc()}}},[t._v("确 定")])],1)],1)],1),t._v(" "),o("div",{staticClass:"deposit-payment-gate-dialog"},[o("el-dialog",{attrs:{title:"超商代收付款",visible:t.dialogStoreVisible},on:{"update:visible":function(e){t.dialogStoreVisible=e}}},[o("el-form",{attrs:{model:t.storePay}},[o("el-form-item",[o("el-radio",{attrs:{label:"CVS"},model:{value:t.storePay.choosePayment,callback:function(e){t.$set(t.storePay,"choosePayment",e)},expression:"storePay.choosePayment"}},[t._v("超商代碼")]),t._v(" "),o("el-radio",{attrs:{label:"BARCODE"},model:{value:t.storePay.choosePayment,callback:function(e){t.$set(t.storePay,"choosePayment",e)},expression:"storePay.choosePayment"}},[t._v("超商條碼")])],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogStoreVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"success"},on:{click:function(e){return t.dialogStoreFuc()}}},[t._v("确 定")])],1)],1)],1),t._v(" "),o("div",{staticClass:"payform",staticStyle:{display:"none"}})],1)],1)}),[],!1,null,"47c56faf",null);e.default=component.exports}}]);