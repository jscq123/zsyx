(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{552:function(e,t,r){"use strict";r.r(t);var o={data:function(){var e=this;return{canNext:!1,rememberUser:!1,activeName:"email",emailForm:{email:"",pass:"",checkpass:"",agreement:!1},phoneForm:{areaNum:"86",phone:"",pass:"",checkpass:"",agreement:!1},checkForm:{code:""},rules:{email:[{required:!0,message:this.$i18n.t("error.emptyEmail"),trigger:"blur"},{type:"email",message:this.$i18n.t("error.rightEmail"),trigger:["blur"]}],phone:[{required:!0,message:this.$i18n.t("error.emptyPhone"),trigger:"blur"},{validator:function(t,r,o){""==r||null==r||null==r?o():/\b\d{6,16}/g.test(r)||""==r?o():o(new Error(e.$i18n.t("error.emptyPhone")))},trigger:"blur"}],pass:[{required:!0,message:this.$i18n.t("error.emptyPass"),trigger:"blur"},{validator:function(t,r,o){""==r||null==r||null==r?o():/^[_a-zA-Z0-9]+$/.test(r)?r.length>20||r.length<8?o(new Error(e.$i18n.t("error.maxPass"))):o():o(new Error(e.$i18n.t("error.errorPass")))},trigger:"blur"}],checkpass:[{required:!0,message:this.$i18n.t("error.checkEmptyPass"),trigger:"blur"},{validator:function(t,r,o){var n="";n="email"==e.activeName?e.emailForm.pass:e.phoneForm.pass,""===r?o(new Error(e.$i18n.t("error.checkEmptyPass"))):r!==n?o(new Error(e.$i18n.t("error.checkErroePass"))):o()},trigger:"blur"}],code:[{required:!0,message:this.$i18n.t("error.emptyCode"),trigger:"blur"},{validator:function(t,r,o){/\d{6}$/.test(r)?o():o(new Error(e.$i18n.t("error.codeError")))},trigger:"blur"}]},fullscreenLoading:!0,areaOption:{en:"China",zh:"中国",locale:"CN",code:86},noSend:!0,count:"",timer:null}},mounted:function(){var e=this;localStorage.setItem("lastPage","/register"),this.axios.get("/areacode.json").then((function(t){200==t.status&&(e.areaOption=t.data)})),"#checkCode"==e.$route.hash?(e.canNext=!0,e.preActive=localStorage.getItem("preActive"),e.emailForm.email=localStorage.getItem("preEmail"),e.emailForm.pass=localStorage.getItem("preEmailPass"),e.emailForm.agreement=!0,e.phoneForm.areaNum=localStorage.getItem("preNativeCode"),e.phoneForm.phone=localStorage.getItem("preMobile"),e.phoneForm.pass=localStorage.getItem("prePassword"),e.phoneForm.agreement=!0):e.canNext=!1},methods:{submitForm:function(e){var t=this;t.$refs[e].validate((function(r){if("checkForm"!=e){if(r){if(!t.$refs[e].model.agreement)return t.$message.error(t.$t("error.checkAgreement")),!1;t.$router.push("#checkCode");var o=localStorage.getItem("lastpage");localStorage.setItem("preActive",t.activeName),localStorage.setItem("preEmail",t.emailForm.email),localStorage.setItem("preEmailPass",t.emailForm.pass),localStorage.setItem("preNativeCode",t.phoneForm.areaNum),localStorage.setItem("preMobile",t.phoneForm.phone),localStorage.setItem("prePassword",t.phoneForm.pass),localStorage.setItem("lastpage",o+"#checkCode"),t.getCode()}}else r&&t.login()}))},login:function(){var e=this,t=localStorage.getItem("from_invite");("email"==e.activeName?this.axios.post("".concat("https://api-gateway.dev.rwdg.io","/user-api/user/register/email"),{email:e.emailForm.email,password:e.emailForm.pass,inviteCode:t||"",verifyCode:e.checkForm.code}):this.axios.post("".concat("https://api-gateway.dev.rwdg.io","/user-api/user/register/mobile"),{nativeCode:e.phoneForm.areaNum,mobile:e.phoneForm.phone,password:e.phoneForm.pass,inviteCode:"",verifyCode:e.checkForm.code})).then((function(t){if(200==t.status){if(localStorage.removeItem("preActive"),localStorage.removeItem("preEmail"),localStorage.removeItem("preEmailPass"),localStorage.removeItem("preNativeCode"),localStorage.removeItem("preMobile"),localStorage.removeItem("prePassword"),!t.data.success)return e.$message.error(e.$t("systemError."+t.data.error.code)),!1;e.$message.success(e.$t("error.regSucess")),setTimeout((function(){e.$router.push("/login")}),1e3)}}))},close:function(){localStorage.setItem("lastPage","/minoption"),this.$store.commit("setLastpage","/minoption"),this.$router.push("/minoption")},back:function(){localStorage.setItem("lastPage","/register"),this.$store.commit("setLastpage","/register"),this.$router.push("/register")},handleClick:function(e,t){console.log(e,t)},getCode:function(){var e=this;("email"==e.activeName?this.axios.post("".concat("https://api-gateway.dev.rwdg.io","/user-api/user/sendVerifyCode/email"),{verifyCodeType:1,email:e.emailForm.email}):this.axios.post("".concat("https://api-gateway.dev.rwdg.io","/user-api/user/sendVerifyCode/mobile"),{verifyCodeType:1,nativeCode:e.phoneForm.areaNum,mobile:e.phoneForm.phone})).then((function(t){if(e.canNext=!0,e.noSend=!1,t.data.success){e.noSend=!1,e.timer||(e.count=60,e.show=!1,e.timer=setInterval((function(){e.count>0&&e.count<=60?e.count--:(e.noSend=!0,clearInterval(e.timer),e.timer=null)}),1e3))}else e.$message.error(e.$t("systemError."+t.data.error.code))}))}},watch:{$route:function(){"#checkCode"==this.$route.hash?this.canNext=!0:this.canNext=!1}}},n=r(35),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{attrs:{direction:"vertical"}},[r("el-main",{staticClass:"no-page"},[r("div",{staticClass:"title"},[e._v(e._s(e.$t("register.title")))]),e._v(" "),r("i",{staticClass:"el-icon-back header",on:{click:function(t){return e.close()}}}),e._v(" "),r("el-row",{staticClass:"account-bg",attrs:{type:"flex",justify:"center"}},[r("el-col",[e.canNext?r("div",{staticClass:"box"},[r("i",{staticClass:"el-icon-back",on:{click:function(t){return e.back()}}}),e._v(" "),r("div",{staticClass:"login-title"},[e._v(e._s(e.$t("register.verification")))]),e._v(" "),r("div",[e._v("\n            "+e._s(e.$t("register.verifiTips"))+"\n            "),"email"==e.activeName?r("span",[e._v("\n              "+e._s(e.$t("register.email"))+"\n              "),r("br"),e._v("\n              "+e._s(e.emailForm.email)+"\n            ")]):r("span",[e._v("\n              "+e._s(e.$t("register.phone"))+"\n              "),r("br"),e._v("\n              "+e._s(e.phoneForm.areaNum)+" "+e._s(e.phoneForm.phone)+"\n            ")])]),e._v(" "),r("el-form",{ref:"checkForm",attrs:{rules:e.rules,model:e.checkForm}},[r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{attrs:{maxlength:"6",placeholder:e.$t("register.codeInput")},model:{value:e.checkForm.code,callback:function(t){e.$set(e.checkForm,"code",t)},expression:"checkForm.code"}},[r("span",{staticClass:"send-code",attrs:{slot:"suffix"},slot:"suffix"},[e.noSend?r("span",{staticClass:"send-code-btn",on:{click:e.getCode}},[e._v(e._s(e.$t("register.sendCode")))]):r("span",[e._v("\n                    "+e._s(e.$t("register.countTips"))+"\n                    "),r("span",[e._v(e._s(e.count))]),e._v("s\n                  ")])])])],1),e._v(" "),r("el-form-item",{staticClass:"form-button-box"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("checkForm")}}},[e._v(e._s(e.$t("register.registerNow")))])],1)],1)],1):r("div",{staticClass:"box"},[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:e.$t("register.email"),name:"email"}},[r("el-form",{ref:"emailForm",attrs:{rules:e.rules,model:e.emailForm}},[r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{placeholder:e.$t("register.emailInput")},model:{value:e.emailForm.email,callback:function(t){e.$set(e.emailForm,"email",t)},expression:"emailForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"pass"}},[r("el-input",{attrs:{type:"password",placeholder:e.$t("register.passwordInput")},model:{value:e.emailForm.pass,callback:function(t){e.$set(e.emailForm,"pass",t)},expression:"emailForm.pass"}})],1),e._v(" "),r("el-form-item",{staticClass:"agreement"},[r("el-checkbox",{model:{value:e.emailForm.agreement,callback:function(t){e.$set(e.emailForm,"agreement",t)},expression:"emailForm.agreement"}},[r("span",[e._v(e._s(e.$t("register.agreement"))),r("nuxt-link",{attrs:{to:"/agreement"}},[e._v(e._s(e.$t("register.agreement-describe")))])],1)])],1),e._v(" "),r("el-form-item",{staticClass:"form-button-box"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("emailForm")}}},[e._v(e._s(e.$t("register.registerNow")))])],1)],1)],1),e._v(" "),r("el-tab-pane",{attrs:{label:e.$t("register.phone"),name:"phone"}},[r("el-form",{ref:"phoneForm",attrs:{rules:e.rules,model:e.phoneForm}},[r("el-form-item",{attrs:{prop:"phone"}},[r("el-row",{attrs:{type:"flex"}},[r("el-col",{attrs:{span:6}},[r("el-select",{staticClass:"area-select",attrs:{placeholder:"86"},model:{value:e.phoneForm.areaNum,callback:function(t){e.$set(e.phoneForm,"areaNum",t)},expression:"phoneForm.areaNum"}},e._l(e.areaOption,(function(t){return r("el-option",{key:t.locale,attrs:{label:t.code,value:t.code}},[r("span",{staticStyle:{float:"left"}},[e._v("+"+e._s(t.code))]),e._v(" "),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.en))])])})),1)],1),e._v(" "),r("el-col",{attrs:{span:17,offset:1}},[r("el-input",{staticClass:"phone-number",attrs:{placeholder:e.$t("register.phoneInput")},model:{value:e.phoneForm.phone,callback:function(t){e.$set(e.phoneForm,"phone",t)},expression:"phoneForm.phone"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"pass"}},[r("el-input",{attrs:{type:"password",placeholder:e.$t("register.passwordInput")},model:{value:e.phoneForm.pass,callback:function(t){e.$set(e.phoneForm,"pass",t)},expression:"phoneForm.pass"}})],1),e._v(" "),r("el-form-item",{staticClass:"agreement"},[r("el-checkbox",{attrs:{name:"agreement"},model:{value:e.phoneForm.agreement,callback:function(t){e.$set(e.phoneForm,"agreement",t)},expression:"phoneForm.agreement"}},[r("span",[e._v(e._s(e.$t("register.agreement"))),r("nuxt-link",{attrs:{to:"/agreement"}},[e._v(e._s(e.$t("register.agreement-describe")))])],1)])],1),e._v(" "),r("el-form-item",{staticClass:"form-button-box"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("phoneForm")}}},[e._v(e._s(e.$t("register.registerNow")))])],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"pt-20 t-c"},[r("span",{staticClass:"no-account"},[e._v("\n              "+e._s(e.$t("register.hasAccount"))+"\n              "),r("nuxt-link",{attrs:{type:"primary",to:"/login"}},[e._v(e._s(e.$t("register.login")))])],1)])],1)])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);